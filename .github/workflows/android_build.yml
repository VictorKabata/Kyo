name: Dev CI

on:
  push:
    branches: [ dev ]

jobs:
  setup:
    name: 🏗 Set up JDK
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8

  tests:
    name: 🧪 Run Unit Tests
    runs-on: ubuntu-latest

    steps:
      - name: Unit tests
        run: bash ./gradlew test --stacktrace

  test-report:
    name: 📄 Generate Tests Report
    runs-on: ubuntu-latest
    needs: [ tests ]

    steps:
      - name: Generate test report
        uses: asadmansr/android-test-report-action@v1.2.0